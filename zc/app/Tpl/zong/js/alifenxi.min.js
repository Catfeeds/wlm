(function(C){var B=true;var L=Array.prototype,w=Function.prototype,j=Object.prototype,u=L.slice,g=j.toString,l=j.hasOwnProperty,Q=window.console,N=window.navigator,h=window.document,F=N.userAgent;
var G="alifenxi",X="__cns",Z="__cnso",R="__cna",O="__cnap",b="$set",I="$set_once",J="$add",v="$append",i="$people_distinct_id",K="__alias",f="__cmpns",x=[X,Z,R,O,i,K,f];
var U=(("https:"==h.location.protocol)?"https://":"http://"),m="a.cnzz.com",d="",V=null,p="0.0.1",S=(C&&C.__SV)||0,E=B?false:(window.XMLHttpRequest&&"withCredentials" in new XMLHttpRequest()),t=!E&&(F.indexOf("MSIE")==-1)&&(F.indexOf("Mozilla")==-1);
var Y={},D=false,k={api_host:U+m,heartbeat_host:U+d,cross_subdomain_cookie:true,cookie_name:"",loaded:function(){},save_initial:true,test:false,verbose:false,img:false,track_pageview:false,debug:false,track_links_timeout:300,cookie_expiration:365,upgrade:false,disable_cookie:false,secure_cookie:false,store_google:true,ip:true,heartbeat:false,heartbeat_interval:60*60,heartbeat_last_day:3},n=false;
(function(){var ab=w.bind,aa=L.forEach,e=L.indexOf,ad=Array.isArray,ae={};Y.bind=function(ai,ag){var af,ah;if(ab&&ai.bind===ab){return ab.apply(ai,u.call(arguments,1));
}if(!Y.isFunction(ai)){throw new TypeError;}af=u.call(arguments,2);return ah=function(){if(!(this instanceof ah)){return ai.apply(ag,af.concat(u.call(arguments)));
}ctor.prototype=ai.prototype;var ak=new ctor;ctor.prototype=null;var aj=ai.apply(ak,af.concat(u.call(arguments)));if(Object(aj)===aj){return aj;}return ak;
};};Y.bind_instance_methods=function(ag){for(var af in ag){if(typeof(ag[af])==="function"){ag[af]=Y.bind(ag[af],ag);}}};var ac=Y.each=function(ak,aj,ai){if(ak==null){return;
}if(aa&&ak.forEach===aa){ak.forEach(aj,ai);}else{if(ak.length===+ak.length){for(var ah=0,af=ak.length;ah<af;ah++){if(ah in ak&&aj.call(ai,ak[ah],ah,ak)===ae){return;
}}}else{for(var ag in ak){if(l.call(ak,ag)){if(aj.call(ai,ak[ag],ag,ak)===ae){return;}}}}}};Y.escapeHTML=function(af){var ag=af;if(ag&&Y.isString(ag)){ag=ag.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");
}return ag;};Y.extend=function(af){ac(u.call(arguments,1),function(ag){for(var ah in ag){if(ag[ah]!==void 0){af[ah]=ag[ah];}}});return af;};Y.isArray=ad||function(af){return g.call(af)==="[object Array]";
};Y.isFunction=function(ag){try{return/^\s*\bfunction\b/.test(ag);}catch(af){return false;}};Y.isArguments=function(af){return !!(af&&l.call(af,"callee"));
};Y.toArray=function(af){if(!af){return[];}if(af.toArray){return af.toArray();}if(Y.isArray(af)){return u.call(af);}if(Y.isArguments(af)){return u.call(af);
}return Y.values(af);};Y.values=function(ag){var af=[];if(ag==null){return af;}ac(ag,function(ah){af[af.length]=ah;});return af;};Y.identity=function(af){return af;
};Y.include=function(ah,ag){var af=false;if(ah==null){return af;}if(e&&ah.indexOf===e){return ah.indexOf(ag)!=-1;}ac(ah,function(ai){if(af||(af=(ai===ag))){return ae;
}});return af;};Y.includes=function(ag,af){return ag.indexOf(af)!==-1;};})();Y.inherit=function(e,aa){e.prototype=new aa();e.prototype.constructor=e;e.superclass=aa.prototype;
return e;};Y.isObject=function(e){return(e===Object(e)&&!Y.isArray(e));};Y.isEmptyObject=function(aa){if(Y.isObject(aa)){for(var e in aa){if(l.call(aa,e)){return false;
}}return true;}return false;};Y.isUndefined=function(e){return e===void 0;};Y.isString=function(e){return g.call(e)=="[object String]";};Y.isDate=function(e){return g.call(e)=="[object Date]";
};Y.isNumber=function(e){return g.call(e)=="[object Number]";};Y.encodeDates=function(e){Y.each(e,function(ab,aa){if(Y.isDate(ab)){e[aa]=Y.formatDate(ab);
}else{if(Y.isObject(ab)){e[aa]=Y.encodeDates(ab);}}});return e;};Y.formatDate=function(aa){function e(ab){return ab<10?"0"+ab:ab;}return aa.getUTCFullYear()+"-"+e(aa.getUTCMonth()+1)+"-"+e(aa.getUTCDate())+"T"+e(aa.getUTCHours())+":"+e(aa.getUTCMinutes())+":"+e(aa.getUTCSeconds());
};Y.safewrap=function(e){return function(){try{e.apply(this,arguments);}catch(aa){y.critical("Implementation error. Please contact support@cnzz.com.");
}};};Y.safewrap_class=function(e,ab){for(var aa=0;aa<ab.length;aa++){e.prototype[ab[aa]]=Y.safewrap(e.prototype[ab[aa]]);}};Y.strip_empty_properties=function(aa){var e={};
Y.each(aa,function(ac,ab){if(Y.isString(ac)&&ac.length>0){e[ab]=ac;}});return e;};Y.truncate=function(ab,aa){var e;if(typeof(ab)==="string"){e=ab.slice(0,aa);
}else{if(Y.isArray(ab)){e=[];Y.each(ab,function(ac){e.push(Y.truncate(ac,aa));});}else{if(Y.isObject(ab)){if(g.call(ab)=="[object HTMLLIElement]"){e=ab.innerHTML.slice(0,aa);
}else{e={};Y.each(ab,function(ad,ac){e[ac]=Y.truncate(ad,aa);});}}else{e=ab;}}}return e;};Y.JSONEncode=(function(){return function(ae){var e;var ac=ae;
var ab;var aa=function(af){var ah=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;
var ag={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};ah.lastIndex=0;return ah.test(af)?'"'+af.replace(ah,function(ai){var aj=ag[ai];
return typeof aj==="string"?aj:"\\u"+("0000"+ai.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+af+'"';};var ad=function(ao,ak){var am="";var ag="    ";
var ai=0;var ah="";var ap="";var af=0;var al=am;var aj=[];var an=ak[ao];if(an&&typeof an==="object"&&typeof an.toJSON==="function"){an=an.toJSON(ao);}switch(typeof an){case"string":return aa(an);
case"number":return isFinite(an)?String(an):"null";case"boolean":case"null":return String(an);case"object":if(!an){return"null";}am+=ag;aj=[];if(g.apply(an)==="[object Array]"){af=an.length;
for(ai=0;ai<af;ai+=1){aj[ai]=ad(ai,an)||"null";}ap=aj.length===0?"[]":am?"[\n"+am+aj.join(",\n"+am)+"\n"+al+"]":"["+aj.join(",")+"]";am=al;return ap;}for(ah in an){if(l.call(an,ah)){ap=ad(ah,an);
if(ap){aj.push(aa(ah)+(am?": ":":")+ap);}}}ap=aj.length===0?"{}":am?"{"+aj.join(",")+""+al+"}":"{"+aj.join(",")+"}";am=al;return ap;}};return ad("",{"":ac});
};})();Y.JSONDecode=(function(){var ac,aa,e={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},al,aj=function(am){throw {name:"SyntaxError",message:am,at:ac,text:al};
},af=function(am){if(am&&am!==aa){aj("Expected '"+am+"' instead of '"+aa+"'");}aa=al.charAt(ac);ac+=1;return aa;},ae=function(){var an,am="";if(aa==="-"){am="-";
af("-");}while(aa>="0"&&aa<="9"){am+=aa;af();}if(aa==="."){am+=".";while(af()&&aa>="0"&&aa<="9"){am+=aa;}}if(aa==="e"||aa==="E"){am+=aa;af();if(aa==="-"||aa==="+"){am+=aa;
af();}while(aa>="0"&&aa<="9"){am+=aa;af();}}an=+am;if(!isFinite(an)){aj("Bad number");}else{return an;}},ag=function(){var ap,ao,an="",am;if(aa==='"'){while(af()){if(aa==='"'){af();
return an;}if(aa==="\\"){af();if(aa==="u"){am=0;for(ao=0;ao<4;ao+=1){ap=parseInt(af(),16);if(!isFinite(ap)){break;}am=am*16+ap;}an+=String.fromCharCode(am);
}else{if(typeof e[aa]==="string"){an+=e[aa];}else{break;}}}else{an+=aa;}}}aj("Bad string");},ai=function(){while(aa&&aa<=" "){af();}},ab=function(){switch(aa){case"t":af("t");
af("r");af("u");af("e");return true;case"f":af("f");af("a");af("l");af("s");af("e");return false;case"n":af("n");af("u");af("l");af("l");return null;}aj("Unexpected '"+aa+"'");
},ak,ah=function(){var am=[];if(aa==="["){af("[");ai();if(aa==="]"){af("]");return am;}while(aa){am.push(ak());ai();if(aa==="]"){af("]");return am;}af(",");
ai();}}aj("Bad array");},ad=function(){var an,am={};if(aa==="{"){af("{");ai();if(aa==="}"){af("}");return am;}while(aa){an=ag();ai();af(":");if(Object.hasOwnProperty.call(am,an)){aj('Duplicate key "'+an+'"');
}am[an]=ak();ai();if(aa==="}"){af("}");return am;}af(",");ai();}}aj("Bad object");};ak=function(){ai();switch(aa){case"{":return ad();case"[":return ah();
case'"':return ag();case"-":return ae();default:return aa>="0"&&aa<="9"?ae():ab();}};return function(an){var am;al=an;ac=0;aa=" ";am=ak();ai();if(aa){aj("Syntax error");
}return am;};})();Y.base64Encode=function(ah){var ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var ab,aa,e,al,ak,aj,ai,am,ag=0,an=0,af="",ae=[];
if(!ah){return ah;}ah=Y.utf8Encode(ah);do{ab=ah.charCodeAt(ag++);aa=ah.charCodeAt(ag++);e=ah.charCodeAt(ag++);am=ab<<16|aa<<8|e;al=am>>18&63;ak=am>>12&63;
aj=am>>6&63;ai=am&63;ae[an++]=ad.charAt(al)+ad.charAt(ak)+ad.charAt(aj)+ad.charAt(ai);}while(ag<ah.length);af=ae.join("");switch(ah.length%3){case 1:af=af.slice(0,-2)+"==";
break;case 2:af=af.slice(0,-1)+"=";break;}return af;};Y.utf8Encode=function(ac){ac=(ac+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");var aa="",ag,e;var ae=0,af;
ag=e=0;ae=ac.length;for(af=0;af<ae;af++){var ad=ac.charCodeAt(af);var ab=null;if(ad<128){e++;}else{if((ad>127)&&(ad<2048)){ab=String.fromCharCode((ad>>6)|192,(ad&63)|128);
}else{ab=String.fromCharCode((ad>>12)|224,((ad>>6)&63)|128,(ad&63)|128);}}if(ab!==null){if(e>ag){aa+=ac.substring(ag,e);}aa+=ab;ag=e=af+1;}}if(e>ag){aa+=ac.substring(ag,ac.length);
}return aa;};Y.UUID=(function(){var e=function(){var ad=1*new Date(),ac=0;while(ad==1*new Date()){ac++;}return ad.toString(16)+ac.toString(16);};var ab=function(){return Math.random().toString(16).replace(".","");
};var aa=function(ai){var ag=F,af,ah,ad=[],ae=0;function ac(aj,ak){var al,am=0;for(al=0;al<ak.length;al++){am|=(ad[al]<<al*8);}return aj^am;}for(af=0;af<ag.length;
af++){ah=ag.charCodeAt(af);ad.unshift(ah&255);if(ad.length>=4){ae=ac(ae,ad);ad=[];}}if(ad.length>0){ae=ac(ae,ad);}return ae.toString(16);};return function(){var ac=(screen.height*screen.width).toString(16);
return(e()+"-"+ab()+"-"+aa()+"-"+ac+"-"+e());};})();Y.isBlockedUA=function(e){if(/(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp)/i.test(e)){return true;
}return false;};Y.HTTPBuildQuery=function(aa,e){var ad,ae,ac,ab=[];if(typeof(e)==="undefined"){e="&";}Y.each(aa,function(ag,af){ae=encodeURIComponent(ag.toString());
ac=encodeURIComponent(af);ab[ab.length]=ac+"="+ae;});return ab.join(e);};Y.getQueryParam=function(aa,ad){ad=ad.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");
var e="[\\?&]"+ad+"=([^&#]*)",ac=new RegExp(e),ab=ac.exec(aa);if(ab===null||(ab&&typeof(ab[1])!=="string"&&ab[1].length)){return"";}else{return decodeURIComponent(ab[1]).replace(/\+/g," ");
}};Y.cookie={get:function(aa){var ac=aa+"=";var e=h.cookie.split(";");for(var ab=0;ab<e.length;ab++){var ad=e[ab];while(ad.charAt(0)==" "){ad=ad.substring(1,ad.length);
}if(ad.indexOf(ac)==0){return decodeURIComponent(ad.substring(ac.length,ad.length));}}return null;},parse:function(e){var aa;try{aa=Y.JSONDecode(Y.cookie.get(e))||{};
}catch(ab){}return aa;},set:function(aa,ai,aj,ah,ae){var ab="",ac="",e="";if(ah){var ag=h.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),af=ag?ag[0]:"";
ab=((af)?"; domain=."+af:"");}if(aj){var ad=new Date();ad.setTime(ad.getTime()+(aj*24*60*60*1000));ac="; expires="+ad.toGMTString();}if(ae){e="; secure";
}h.cookie=aa+"="+encodeURIComponent(ai)+ac+"; path=/"+ab+e;},remove:function(aa,e){Y.cookie.set(aa,"",-1,e);}};Y.register_event=(function(){var aa=function(ad,af,ae,ac){if(!ad){y.error("No valid element provided to register_event");
return;}if(ad.addEventListener&&!ac){ad.addEventListener(af,ae,false);}else{var ah="on"+af;var ag=ad[ah];ad[ah]=e(ad,ae,ag);}};function e(ac,ae,af){var ad=function(aj){aj=aj||ab(window.event);
if(!aj){return undefined;}var ah=true;var ai,ag;if(Y.isFunction(af)){ai=af(aj);}ag=ae.call(ac,aj);if((false===ai)||(false===ag)){ah=false;}return ah;};
return ad;}function ab(ac){if(ac){ac.preventDefault=ab.preventDefault;ac.stopPropagation=ab.stopPropagation;}return ac;}ab.preventDefault=function(){this.returnValue=false;
};ab.stopPropagation=function(){this.cancelBubble=true;};return aa;})();Y.dom_query=(function(){function e(ad){return ad.all?ad.all:ad.getElementsByTagName("*");
}var ac=/[\t\r\n]/g;function aa(af,ad){var ae=" "+ad+" ";return((" "+af.className+" ").replace(ac," ").indexOf(ae)>=0);}function ab(av){if(!h.getElementsByTagName){return new Array();
}var ao=av.split(" ");var ak;var ai=new Array(h);for(var ax=0;ax<ao.length;ax++){ak=ao[ax].replace(/^\s+/,"").replace(/\s+$/,"");if(ak.indexOf("#")>-1){var ar=ak.split("#");
var ag=ar[0];var aq=ar[1];var ae=h.getElementById(aq);if(!ae||(ag&&ae.nodeName.toLowerCase()!=ag)){return new Array();}ai=new Array(ae);continue;}if(ak.indexOf(".")>-1){var ar=ak.split(".");
var ag=ar[0];var af=ar[1];if(!ag){ag="*";}var al=new Array;var aj=0;for(var ay=0;ay<ai.length;ay++){var am;if(ag=="*"){am=e(ai[ay]);}else{am=ai[ay].getElementsByTagName(ag);
}for(var au=0;au<am.length;au++){al[aj++]=am[au];}}ai=new Array;var ap=0;for(var at=0;at<al.length;at++){if(al[at].className&&Y.isString(al[at].className)&&aa(al[at],af)){ai[ap++]=al[at];
}}continue;}if(ak.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){var ag=RegExp.$1;var aw=RegExp.$2;var ad=RegExp.$3;var an=RegExp.$4;if(!ag){ag="*";
}var al=new Array;var aj=0;for(var ay=0;ay<ai.length;ay++){var am;if(ag=="*"){am=e(ai[ay]);}else{am=ai[ay].getElementsByTagName(ag);}for(var au=0;au<am.length;
au++){al[aj++]=am[au];}}ai=new Array;var ap=0;var ah;switch(ad){case"=":ah=function(az){return(az.getAttribute(aw)==an);};break;case"~":ah=function(az){return(az.getAttribute(aw).match(new RegExp("\\b"+an+"\\b")));
};break;case"|":ah=function(az){return(az.getAttribute(aw).match(new RegExp("^"+an+"-?")));};break;case"^":ah=function(az){return(az.getAttribute(aw).indexOf(an)==0);
};break;case"$":ah=function(az){return(az.getAttribute(aw).lastIndexOf(an)==az.getAttribute(aw).length-an.length);};break;case"*":ah=function(az){return(az.getAttribute(aw).indexOf(an)>-1);
};break;default:ah=function(az){return az.getAttribute(aw);};}ai=new Array;ap=0;for(var at=0;at<al.length;at++){if(ah(al[at])){ai[ap++]=al[at];}}continue;
}ag=ak;var al=new Array;var aj=0;for(var ay=0;ay<ai.length;ay++){var am=ai[ay].getElementsByTagName(ag);for(var au=0;au<am.length;au++){al[aj++]=am[au];
}}ai=al;}return ai;}return ab;})();Y.info={campaignParams:function(){var e="utm_source utm_medium utm_campaign utm_content utm_term".split(" "),aa="",ab={};
Y.each(e,function(ac){aa=Y.getQueryParam(h.URL,ac);if(aa.length){ab[ac]=aa;}});return ab;},searchEngine:function(e){if(e.search("https?://(.*)google.([^/?]*)")===0){return"google";
}else{if(e.search("https?://(.*)bing.com")===0){return"bing";}else{if(e.search("https?://(.*)yahoo.com")===0){return"yahoo";}else{if(e.search("https?://(.*)duckduckgo.com")===0){return"duckduckgo";
}else{return null;}}}}},searchInfo:function(ac){var ab=Y.info.searchEngine(ac),ad=(ab!="yahoo")?"q":"p",aa={};if(ab!==null){aa["$search_engine"]=ab;var e=Y.getQueryParam(ac,ad);
if(e.length){aa.cn_keyword=e;}}return aa;},browser:function(aa,ab,e){var ab=ab||"";if(e){if(Y.includes(aa,"Mini")){return"Opera Mini";}return"Opera";}else{if(/(BlackBerry|PlayBook|BB10)/i.test(aa)){return"BlackBerry";
}else{if(Y.includes(aa,"FBIOS")){return"Facebook Mobile";}else{if(Y.includes(aa,"Chrome")){return"Chrome";}else{if(Y.includes(aa,"CriOS")){return"Chrome iOS";
}else{if(Y.includes(ab,"Apple")){if(Y.includes(aa,"Mobile")){return"Mobile Safari";}return"Safari";}else{if(Y.includes(aa,"Android")){return"Android Mobile";
}else{if(Y.includes(aa,"Konqueror")){return"Konqueror";}else{if(Y.includes(aa,"Firefox")){return"Firefox";}else{if(Y.includes(aa,"MSIE")||Y.includes(aa,"Trident/")){return"Internet Explorer";
}else{if(Y.includes(aa,"Gecko")){return"Mozilla";}else{return"";}}}}}}}}}}}},os:function(){var e=F;if(/Windows/i.test(e)){if(/Phone/.test(e)){return"Windows Mobile";
}return"Windows";}else{if(/(iPhone|iPad|iPod)/.test(e)){return"iOS";}else{if(/Android/.test(e)){return"Android";}else{if(/(BlackBerry|PlayBook|BB10)/i.test(e)){return"BlackBerry";
}else{if(/Mac/i.test(e)){return"Mac OS X";}else{if(/Linux/.test(e)){return"Linux";}else{return"";}}}}}}},device:function(e){if(/iPad/.test(e)){return"iPad";
}else{if(/iPod/.test(e)){return"iPod Touch";}else{if(/iPhone/.test(e)){return"iPhone";}else{if(/(BlackBerry|PlayBook|BB10)/i.test(e)){return"BlackBerry";
}else{if(/Windows Phone/i.test(e)){return"Windows Phone";}else{if(/Android/.test(e)){return"Android";}else{return"";}}}}}}},referringDomain:function(aa){var e=aa.split("/");
if(e.length>=3){return e[2];}return"";},properties:function(){return Y.extend({ali_lib:"web","$referrer":h.referrer||"$direct"},Y.info.screen());},screen:function(){return{"$screen_height":screen.height,"$screen_width":screen.width};
},people_properties:function(){return Y.strip_empty_properties({"$os":Y.info.os(),"$browser":Y.info.browser(F,N.vendor,window.opera)});},pageviewInfo:function(e){return Y.strip_empty_properties({cn_page:e});
}};var y={log:function(){if(D&&!Y.isUndefined(Q)&&Q){try{Q.log.apply(Q,arguments);}catch(e){Y.each(arguments,function(aa){Q.log(aa);});}}},error:function(){if(D&&!Y.isUndefined(Q)&&Q){var e=["alifenxi error:"].concat(Y.toArray(arguments));
try{Q.error.apply(Q,e);}catch(aa){Y.each(e,function(ab){Q.error(ab);});}}},critical:function(){if(!Y.isUndefined(Q)&&Q){var e=["alifenxi error:"].concat(Y.toArray(arguments));
try{Q.error.apply(Q,e);}catch(aa){Y.each(e,function(ab){Q.error(ab);});}}}};var A=function(){};A.prototype.create_properties=function(){};A.prototype.event_handler=function(){};
A.prototype.after_track_handler=function(){};A.prototype.init=function(e){this.cn=e;return this;};A.prototype.track=function(ae,af,e,aa,ad){var ab=this,ac=null;
if(g.call(ae)=="[object HTMLLIElement]"){ac=ae;}else{ac=Y.dom_query(ae);}if(ac.length==0){y.error("The DOM query ("+ae+") returned 0 elements");return;
}if(e&&Y.isFunction(e)){ad=aa;aa=e;}Y.each(ac,function(ag){Y.register_event(ag,this.override_event,function(ak){aa&&aa(ag,e);var ah={},ai=ab.create_properties(e,this),aj=ab.cn.get_config("track_links_timeout");
ab.event_handler(ak,this,ah);window.setTimeout(ab.track_callback(ad,ai,ah,true),aj);ab.cn.track(af,ai,ab.track_callback(ad,ai,ah));});},this);return true;
};A.prototype.track_callback=function(ad,ab,e,aa){aa=aa||false;var ac=this;return function(){if(e.callback_fired){return;}e.callback_fired=true;if(ad&&ad(aa,ab)===false){return;
}ac.after_track_handler(ab,e,aa);};};A.prototype.create_properties=function(aa,e){var ab;if(typeof(aa)==="function"){ab=aa(e);}else{ab=Y.extend({},aa);
}return ab;};var T=function(){this.override_event="click";};Y.inherit(T,A);T.prototype.create_properties=function(aa,e){var ab=T.superclass.create_properties.apply(this,arguments);
if(e.href){ab.url=e.href;}return ab;};T.prototype.event_handler=function(e,ab,aa){aa.new_tab=(e.which===2||e.metaKey||ab.target==="_blank");aa.href=ab.href;
if(!aa.new_tab){e.preventDefault();}};T.prototype.after_track_handler=function(ab,e,aa){if(e.new_tab){return;}setTimeout(function(){window.location=e.href;
},0);};var s=function(){this.override_event="submit";};Y.inherit(s,A);s.prototype.event_handler=function(e,ab,aa){aa.element=ab;e.preventDefault();};s.prototype.after_track_handler=function(ab,e,aa){setTimeout(function(){e.element.submit();
},0);};var P=function(e){this["props"]={};this.campaign_params_saved=false;if(e.cookie_name){this.name="cn_"+e.cookie_name;}else{this.name="cn_"+e.token+"_alifenxi";
}this.load();this.update_config(e);this.upgrade(e);this.save();};P.prototype.properties=function(){var e={};Y.each(this["props"],function(ab,aa){if(!Y.include(x,aa)){e[aa]=ab;
}});return e;};P.prototype.load=function(){if(this.disabled){return;}var e=Y.cookie.parse(this.name);if(e){this["props"]=Y.extend({},e);}};P.prototype.upgrade=function(aa){var e=aa.upgrade,ab,ac;
if(e){ab="cn_super_properties";if(typeof(e)==="string"){ab=e;}ac=Y.cookie.parse(ab);Y.cookie.remove(ab);Y.cookie.remove(ab,true);if(ac){this["props"]=Y.extend(this["props"],ac.all,ac.events);
}}if(!aa.cookie_name&&aa.name!=="alifenxi"){ab="cn_"+aa.token+"_"+aa.name;ac=Y.cookie.parse(ab);if(ac){Y.cookie.remove(ab);Y.cookie.remove(ab,true);this.register_once(ac);
}}};P.prototype.save=function(){if(this.disabled){return;}this._expire_notification_campaigns();Y.cookie.set(this.name,Y.JSONEncode(this["props"]),this.expire_days,this.cross_subdomain,this.secure);
};P.prototype.remove=function(){Y.cookie.remove(this.name,false);Y.cookie.remove(this.name,true);};P.prototype.clear=function(){this.remove();this["props"]={};
};P.prototype.register_once=function(aa,e,ab){if(Y.isObject(aa)){if(typeof(e)==="undefined"){e="None";}this.expire_days=(typeof(ab)==="undefined")?this.default_expiry:ab;
Y.each(aa,function(ac,ad){if(!this["props"][ad]||this["props"][ad]===e){this["props"][ad]=ac;}},this);this.save();return true;}return false;};P.prototype.register=function(e,aa){if(Y.isObject(e)){this.expire_days=(typeof(aa)==="undefined")?this.default_expiry:aa;
Y.extend(this["props"],e);this.save();return true;}return false;};P.prototype.unregister=function(e){if(Y.isArray(e)){Y.each(e,function(aa){if(aa in this["props"]){delete this["props"][aa];
}},this);this.save();}else{if(e in this["props"]){delete this["props"][e];this.save();}}};P.prototype._expire_notification_campaigns=function(){var ab=this["props"][f],e=D?60*1000:60*60*1000;
if(!ab){return;}for(var aa in ab){if(1*new Date()-ab[aa]>e){delete ab[aa];}}if(Y.isEmptyObject(ab)){delete this["props"][f];}};P.prototype.update_campaign_params=function(){if(!this.campaign_params_saved){this.register(Y.info.campaignParams());
this.campaign_params_saved=true;}};P.prototype.update_search_keyword=function(e){this.register(Y.info.searchInfo(e));};P.prototype.update_initial_info=function(aa){var e=new Date();
this.register_once({"$initial_time":Math.floor(e.getTime()/1000)+e.getTimezoneOffset()*60,"$initial_referrer":aa||"$direct","$initial_referring_domain":Y.info.referringDomain(aa)||"$direct"},"");
};P.prototype.get_referrer_info=function(){return Y.strip_empty_properties({"$initial_referrer":this["props"]["$initial_referrer"],"$initial_referring_domain":this["props"]["$initial_referring_domain"]});
};P.prototype.safe_merge=function(e){Y.each(this["props"],function(aa,ab){if(!(ab in e)){e[ab]=aa;}});return e;};P.prototype.update_config=function(e){this.default_expiry=this.expire_days=e.cookie_expiration;
this.set_disabled(e.disable_cookie);this.set_cross_subdomain(e.cross_subdomain_cookie);this.set_secure(e.secure_cookie);};P.prototype.set_disabled=function(e){this.disabled=e;
if(this.disabled){this.remove();}};P.prototype.set_cross_subdomain=function(e){if(e!==this.cross_subdomain){this.cross_subdomain=e;this.remove();this.save();
}};P.prototype.get_cross_subdomain=function(){return this.cross_subdomain;};P.prototype.set_secure=function(e){if(e!==this.secure){this.secure=e?true:false;
this.remove();this.save();}};P.prototype._add_to_people_queue=function(aa,af){var ac=this._get_queue_key(aa),ae=af[aa],ag=this._get_or_create_queue(b),e=this._get_or_create_queue(I),ad=this._get_or_create_queue(J),ab=this._get_or_create_queue(v,[]);
if(ac===X){Y.extend(ag,ae);this._pop_from_people_queue(J,ae);}else{if(ac===Z){Y.each(ae,function(ai,ah){if(!(ah in e)){e[ah]=ai;}});}else{if(ac===R){Y.each(ae,function(ai,ah){if(ah in ag){ag[ah]+=ai;
}else{if(!(ah in ad)){ad[ah]=0;}ad[ah]+=ai;}},this);}else{if(ac===O){ab.push(ae);}}}}y.log("ALIFENXI PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):");y.log(af);
this.save();};P.prototype._pop_from_people_queue=function(e,ab){var aa=this._get_queue(e);if(!Y.isUndefined(aa)){Y.each(ab,function(ad,ac){delete aa[ac];
},this);this.save();}};P.prototype._get_queue_key=function(e){if(e===b){return X;}else{if(e===I){return Z;}else{if(e===J){return R;}else{if(e===v){return O;
}else{y.error("Invalid queue:",e);}}}}};P.prototype._get_queue=function(e){return this["props"][this._get_queue_key(e)];};P.prototype._get_or_create_queue=function(e,ab){var aa=this._get_queue_key(e),ab=Y.isUndefined(ab)?{}:ab;
return this["props"][aa]||(this["props"][aa]=ab);};var M=function(){};M.prototype.init=function(ac,ab,aa){if(typeof(aa)==="undefined"){y.error("You must name your new library: init(token, config, name)");
return;}if(aa===G){y.error("You must initialize the main alifenxi object right after you include the Alifenxi js snippet");return;}var e=a(ac,ab,aa);C[aa]=e;
e._loaded();return e;};M.prototype._init=function(ab,aa,e){this["__loaded"]=true;this["config"]={};this.set_config(Y.extend({},k,aa,{name:e,token:ab,callback_fn:((e===G)?e:G+"."+e)+"._jsc"}));
this["_jsc"]=function(){};this.__dom_loaded_queue=[];this.__request_queue=[];this.__disabled_events=[];this._flags={disable_all_events:false,identify_called:false};
this["cookie"]=new P(this["config"]);this.register_once({distinct_id:Y.UUID()},"");};M.prototype._loaded=function(){var aa=this;this.get_config("loaded")(this);
if(this.get_config("track_pageview")){this.track_pageview();}if(this.get_config("heartbeat")){function e(){aa._heartbeat();V=setTimeout(e,aa.get_config("heartbeat_interval")*1000);
}e();}};M.prototype._heartbeat=function(){var ad=Y.cookie.get("cn_heartbeat_time"),ac=Y.cookie.get("cn_heartbeat_notneed"),ab="",e="",aa=Math.floor((new Date().getTime())/1000);
if(ac){V&&clearTimeout(V);return;}if(!ad){this._set_heartbeat_cookie(aa+"|"+aa);this._send_heartbeat();}else{ad=ad.split("|");e=ad[0]-0;ab=ad[1]-0;if((aa-ab>=this.get_config("heartbeat_interval"))&&(aa<e+this.get_config("heartbeat_last_day")*24*60*60)){this._set_heartbeat_cookie(e+"|"+aa);
this._send_heartbeat();}else{V&&clearTimeout(V);}}};M.prototype._set_heartbeat_cookie=function(e){Y.cookie.set("cn_heartbeat_time",e,this.get_config("cookie_expiration"),this.get_config("cross_subdomain_cookie"),this.get_config("secure_cookie"));
};M.prototype._send_heartbeat=function(ad){window.cnzz_callback=function(ae){if(ae&&ae.status==-100){Y.cookie.set("cn_heartbeat_notneed",true,this.get_config("cookie_expiration"),this.get_config("cross_subdomain_cookie"),this.get_config("secure_cookie"));
}};var aa=this.get_config("heartbeat_host")+"?token="+this.get_config("token")+"&t="+new Date().getTime().toString()+"&callback=cnzz_callback";if(E&&false){var ac=new XMLHttpRequest();
ac.open("GET",aa,true);ac.withCredentials=true;ac.onreadystatechange=function(af){if(ac.readyState===4){if(ac.status===200){if(ad){ad(Number(ac.responseText));
}}else{var ae="Bad HTTP status: "+ac.status+" "+ac.statusText;y.error(ae);if(ad){ad(0);}}}};ac.send(null);}else{var e=h.createElement("script");e.type="text/javascript";
e.async=true;e.defer=true;e.src=aa;var ab=h.getElementsByTagName("script")[0];ab.parentNode.insertBefore(e,ab);}};M.prototype._dom_loaded=function(){Y.each(this.__dom_loaded_queue,function(e){this._track_dom.apply(this,e);
},this);Y.each(this.__request_queue,function(e){this._send_request.apply(this,e);},this);delete this.__dom_loaded_queue;delete this.__request_queue;};M.prototype._track_dom=function(ab,e){if(this.get_config("img")){y.error("You can't use DOM tracking functions with img = true.");
return false;}if(!n){this.__dom_loaded_queue.push([ab,e]);return false;}var aa=new ab().init(this);return aa.track.apply(aa,e);};M.prototype._prepare_callback=function(ae,ac){if(Y.isUndefined(ae)){return null;
}if(E){var ad=function(af){ae(af,ac);};return ad;}else{var e=this["_jsc"],aa=""+Math.floor(Math.random()*100000000),ab=this.get_config("callback_fn")+'["'+aa+'"]';
e[aa]=function(af){delete e[aa];ae(af,ac);};return ab;}};M.prototype._send_request=function(ab,af,ag){if(t){this.__request_queue.push(arguments);return;
}var ad=this.get_config("verbose");if(af.verbose){ad=true;}if(this.get_config("test")){af.test=1;}if(ad){af.verbose=1;}if(this.get_config("img")){af.img=1;
}if(!E){if(ag){af.callback=ag;}else{if(ad||this.get_config("test")){af.callback="(function(){})";}}}af.ip=this.get_config("ip")?1:0;af._=new Date().getTime().toString();
ab+="?"+Y.HTTPBuildQuery(af);if("img" in af){var aa=h.createElement("img");aa.src=ab;h.body.appendChild(aa);}else{if(E){var ae=new XMLHttpRequest();ae.open("GET",ab,true);
ae.withCredentials=true;ae.onreadystatechange=function(ai){if(ae.readyState===4){if(ae.status===200){if(ag){if(ad){ag(Y.JSONDecode(ae.responseText));}else{ag(Number(ae.responseText));
}}}else{var ah="Bad HTTP status: "+ae.status+" "+ae.statusText;y.error(ah);if(ag){if(ad){ag({status:0,error:ah});}else{ag(0);}}}}};ae.send(null);}else{var e=h.createElement("script");
e.type="text/javascript";e.async=true;e.defer=true;e.src=ab;var ac=h.getElementsByTagName("script")[0];ac.parentNode.insertBefore(e,ac);}}};M.prototype._execute_array=function(ae){var ac,e=[],ab=[],aa=[];
Y.each(ae,function(af){if(af){ac=af[0];if(typeof(af)==="function"){af.call(this);}else{if(Y.isArray(af)&&ac==="alias"){e.push(af);}else{if(Y.isArray(af)&&ac.indexOf("track")!=-1&&typeof(this[ac])==="function"){aa.push(af);
}else{ab.push(af);}}}}},this);var ad=function(ag,af){Y.each(ag,function(ah){this[ah[0]].apply(this,ah.slice(1));},af);};ad(e,this);ad(ab,this);ad(aa,this);
};M.prototype.push=function(e){this._execute_array([e]);};M.prototype.disable=function(e){if(typeof(e)==="undefined"){this._flags.disable_all_events=true;
}else{this.__disabled_events=this.__disabled_events.concat(e);}};M.prototype.track_pageview=function(e){if(typeof(e)==="undefined"){e=h.location.href;}this.track("cn_page_view",Y.info.screen());
};M.prototype.track_links=function(){return this._track_dom.call(this,T,arguments);};M.prototype.track_forms=function(){return this._track_dom.call(this,s,arguments);
};M.prototype.register=function(e,aa){this["cookie"].register(e,aa);};M.prototype.register_once=function(aa,e,ab){this["cookie"].register_once(aa,e,ab);
};M.prototype.unregister=function(e){this["cookie"].unregister(e);};M.prototype.clear=function(){this["cookie"].clear();this.register_once({distinct_id:Y.UUID()},"");
};M.prototype._register_single=function(ab,aa){var e={};e[ab]=aa;this.register(e);};M.prototype.identify=function(ac,ab,aa,ad,e){if(ac!=this.get_distinct_id()&&ac!=this.get_property(K)){this.unregister(K);
this._register_single("distinct_id",ac);}this._flags.identify_called=true;this["people"]._flush(ab,aa,ad,e);};M.prototype.get_distinct_id=function(){return this.get_property("distinct_id");
};M.prototype.name_tag=function(e){this._register_single("cn_name_tag",e);};M.prototype.track=function(ae,e,af){if(typeof(ae)==="undefined"){y.error("No event name provided to alifenxi.track");
return;}if(Y.isBlockedUA(F)||this._flags.disable_all_events||Y.include(this.__disabled_events,ae)){if(typeof(af)!=="undefined"){af(0);}return;}e=e||{};
e.token=e.token||this.get_config("token");if(this.get_config("store_google")){this["cookie"].update_campaign_params();}if(this.get_config("save_initial")){this["cookie"].update_initial_info(h.referrer);
}e=Y.extend({},Y.info.properties(),this["cookie"].properties(),e);var ad={event:ae,properties:e};var ac=Y.truncate(ad,255),ab=Y.JSONEncode(ac),aa=Y.base64Encode(ab);
y.log("ALIFENXI REQUEST:");y.log(ac);this._send_request(this.get_config("api_host")+"/track/",{data:aa},this._prepare_callback(af,ac));return ac;};M.prototype.set_config=function(e){if(Y.isObject(e)){Y.extend(this["config"],e);
if(this["cookie"]){this["cookie"].update_config(this["config"]);}D=D||this.get_config("debug");}};M.prototype.get_config=function(e){return this["config"][e];
};M.prototype.get_property=function(e){return this["cookie"]["props"][e];};M.prototype.toString=function(){var e=this.get_config("name");if(e!==G){e=G+"."+e;
}return e;};var H=function(){};H.prototype._init=function(e){this._alifenxi=e;this.custom_properties=null;};H.prototype.get=function(){return this.custom_properties;
};H.prototype.set=function(ad,ac,ab){var aa={};var e={};if(Y.isObject(ad)){Y.each(ad,function(af,ae){if(ae=="$distinct_id"||ae=="$token"){return;}else{e[ae]=af;
}});ab=ac;}else{e[ad]=ac;}this.custom_properties=e;if(this._get_config("save_initial")){this._alifenxi.cookie.update_initial_info(h.referrer);}e=Y.extend({},e);
aa[b]=e;return this._send_request(aa,ab);};H.prototype.set_once=function(ad,ac,ab){var e={};var aa={};if(Y.isObject(ad)){Y.each(ad,function(af,ae){if(ae=="$distinct_id"||ae=="$token"){return;
}else{aa[ae]=af;}});ab=ac;}else{aa[ad]=ac;}e[I]=aa;return this._send_request(e,ab);};H.prototype.increment=function(ad,aa,ac){var e={};var ab={};if(Y.isObject(ad)){Y.each(ad,function(af,ae){if(ae=="$distinct_id"||ae=="$token"){return;
}else{if(isNaN(parseFloat(af))){y.error("Invalid increment value passed to alifenxi.people.increment - must be a number");return;}else{ab[ae]=af;}}});ac=aa;
}else{if(Y.isUndefined(aa)){aa=1;}ab[ad]=aa;}e[J]=ab;return this._send_request(e,ac);};H.prototype.append=function(e,ac,ad){var ab={};var aa={};if(Y.isObject(e)){Y.each(e,function(af,ae){if(ae=="$distinct_id"||ae=="$token"){return;
}else{aa[ae]=af;}});ad=ac;}else{aa[e]=ac;}ab[v]=aa;return this._send_request(ab,ad);};H.prototype.track_charge=function(aa,e,ab){if(!Y.isNumber(aa)){aa=parseFloat(aa);
if(isNaN(aa)){y.error("Invalid value passed to alifenxi.people.track_charge - must be a number");return;}}return this.append("$transactions",Y.extend({"$amount":aa},e),ab);
};H.prototype.clear_charges=function(e){return this.set("$transactions",[],e);};H.prototype.delete_user=function(){if(!this._identify_called()){y.error("alifenxi.people.delete_user() requires you to call identify() first");
return;}var e={"$delete":this._alifenxi.get_distinct_id()};return this._send_request(e);};H.prototype.toString=function(){return this._alifenxi.toString()+".people";
};H.prototype._send_request=function(ad,ae){ad["$token"]=this._get_config("token");ad["$distinct_id"]=this._alifenxi.get_distinct_id();var ac=Y.encodeDates(ad),ab=Y.truncate(ac,255),aa=Y.JSONEncode(ac),e=Y.base64Encode(aa);
if(!this._identify_called()){this._enqueue(ad);if(!Y.isUndefined(ae)){if(this._get_config("verbose")){ae({status:-1,error:null});}else{ae(-1);}}return ab;
}y.log("ALIFENXI PEOPLE REQUEST:");y.log(ab);this._alifenxi._send_request(this._get_config("api_host")+"/engage/",{data:e},this._alifenxi._prepare_callback(ae,ab));
return ab;};H.prototype._get_config=function(e){return this._alifenxi.get_config(e);};H.prototype._identify_called=function(){return this._alifenxi._flags.identify_called===true;
};H.prototype._enqueue=function(e){if(b in e){this._alifenxi.cookie._add_to_people_queue(b,e);}else{if(I in e){this._alifenxi.cookie._add_to_people_queue(I,e);
}else{if(J in e){this._alifenxi.cookie._add_to_people_queue(J,e);}else{if(v in e){this._alifenxi.cookie._add_to_people_queue(v,e);}else{y.error("Invalid call to _enqueue():",e);
}}}}};H.prototype._flush=function(aa,ah,ad,aj){var af=this,e=Y.extend({},this._alifenxi.cookie._get_queue(b)),ab=Y.extend({},this._alifenxi.cookie._get_queue(I)),ag=Y.extend({},this._alifenxi.cookie._get_queue(J)),ac=this._alifenxi.cookie._get_queue(v);
if(!Y.isUndefined(e)&&Y.isObject(e)&&!Y.isEmptyObject(e)){af._alifenxi.cookie._pop_from_people_queue(b,e);this.set(e,function(ak,al){if(ak==0){af._alifenxi.cookie._add_to_people_queue(b,e);
}if(!Y.isUndefined(aa)){aa(ak,al);}});}if(!Y.isUndefined(ab)&&Y.isObject(ab)&&!Y.isEmptyObject(ab)){af._alifenxi.cookie._pop_from_people_queue(I,ab);this.set_once(ab,function(ak,al){if(ak==0){af._alifenxi.cookie._add_to_people_queue(I,ab);
}if(!Y.isUndefined(aj)){aj(ak,al);}});}if(!Y.isUndefined(ag)&&Y.isObject(ag)&&!Y.isEmptyObject(ag)){af._alifenxi.cookie._pop_from_people_queue(J,ag);this.increment(ag,function(ak,al){if(ak==0){af._alifenxi.cookie._add_to_people_queue(J,ag);
}if(!Y.isUndefined(ah)){ah(ak,al);}});}if(!Y.isUndefined(ac)&&Y.isArray(ac)&&ac.length){for(var ae=ac.length-1;ae>=0;ae--){var ai=ac.pop();af.append(ai,function(ak,al){if(ak==0){af._alifenxi.cookie._add_to_people_queue(v,ai);
}if(!Y.isUndefined(ad)){ad(ak,al);}});}af._alifenxi.cookie.save();}};Y.toArray=Y.toArray;Y.isObject=Y.isObject;Y.JSONEncode=Y.JSONEncode;Y.JSONDecode=Y.JSONDecode;
Y.isBlockedUA=Y.isBlockedUA;Y.isEmptyObject=Y.isEmptyObject;Y.info=Y.info;Y.info["device"]=Y.info.device;Y.info["browser"]=Y.info.browser;M.prototype.init=M.prototype.init;
M.prototype.disable=M.prototype.disable;M.prototype.track=M.prototype.track;M.prototype.track_links=M.prototype.track_links;M.prototype.track_forms=M.prototype.track_forms;
M.prototype.track_pageview=M.prototype.track_pageview;M.prototype.register=M.prototype.register;M.prototype.register_once=M.prototype.register_once;M.prototype.unregister=M.prototype.unregister;
M.prototype.clear=M.prototype.clear;M.prototype.identify=M.prototype.identify;M.prototype.set_config=M.prototype.set_config;M.prototype.get_config=M.prototype.get_config;
M.prototype.get_property=M.prototype.get_property;M.prototype.get_distinct_id=M.prototype.get_distinct_id;M.prototype.toString=M.prototype.toString;P.prototype.properties=P.prototype.properties;
P.prototype.update_search_keyword=P.prototype.update_search_keyword;P.prototype.update_initial_info=P.prototype.update_initial_info;P.prototype.get_cross_subdomain=P.prototype.get_cross_subdomain;
P.prototype.clear=P.prototype.clear;Y.safewrap_class(P,["_expire_notification_campaigns"]);Y.safewrap_class(M,["identify","_show_notification"]);var a=function(ac,ab,aa){var e,ad=(aa===G)?C:C[aa];
if(ad&&!Y.isArray(ad)){y.error("You have already initialized "+aa);return;}e=new M();e._init(ac,ab,aa);e.people=new H();e.people._init(e);D=D||e.get_config("debug");
if(!Y.isUndefined(ad)){e._execute_array.call(e.people,ad.people);e._execute_array(ad);}return e;};if(Y.isUndefined(C)){y.critical("'alifenxi' object not initialized. Ensure you are using the latest version of the Alifenxi JS Library along with the snippet we provide.");
return;}if(C.__loaded||(C.config&&C.cookie)){y.error("Alifenxi library has already been downloaded at least once.");return;}if(S<1.1){y.critical("Version mismatch; please ensure you're using the latest version of the Alifenxi code snippet.");
return;}var z={};Y.each(C._i,function(ab){var aa,e;if(ab&&Y.isArray(ab)){aa=ab[ab.length-1];e=a.apply(this,ab);z[aa]=e;}});var r=function(){Y.each(z,function(e,aa){if(aa!==G){C[aa]=e;
}});C._=Y;};C.init=function(ac,ab,aa){if(aa){if(!C[aa]){C[aa]=z[aa]=create_mplib(ac,ab,aa);C[aa]._loaded();}}else{var e=C;if(z[G]){e=z[G];}else{if(ac){e=create_mplib(ac,ab,G);
e._loaded();}}window[G]=C=e;r();}};C.init();Y.each(z,function(e){e._loaded();});function o(){if(o.done){return;}o.done=true;n=true;t=false;Y.each(z,function(e){e._dom_loaded();
});}if(h.addEventListener){if(h.readyState=="complete"){o();}else{h.addEventListener("DOMContentLoaded",o,false);}}else{if(h.attachEvent){h.attachEvent("onreadystatechange",o);
var q=false;try{q=window.frameElement==null;}catch(W){}if(h.documentElement.doScroll&&q){function c(){try{h.documentElement.doScroll("left");}catch(aa){setTimeout(c,1);
return;}o();}c();}}}Y.register_event(window,"load",o,true);})(window.alifenxi);